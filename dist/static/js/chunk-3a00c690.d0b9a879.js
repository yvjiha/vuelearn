(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a00c690"],{"1e4b":function(t,e,n){"use strict";n.r(e);var o=n("3f76"),i=n("75e5");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("d44d");var l=n("2877"),s=Object(l["a"])(i["default"],o["a"],o["b"],!1,null,null,null);e["default"]=s.exports},"222d":function(t,e,n){},"3f76":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:20,xs:24}},[n("el-form",{ref:"queryForm",attrs:{model:t.queryParams,inline:!0,"label-width":"68px"}},[n("el-form-item",{attrs:{label:"车号",prop:"userName"}},[n("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入车号",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.code,callback:function(e){t.$set(t.queryParams,"code",e)},expression:"queryParams.code"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:t.handleQuery}},[t._v("搜索")]),n("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:t.resetQuery}},[t._v("重置")])],1)],1),n("el-row",{staticClass:"mb8",attrs:{gutter:10}},[n("el-col",{attrs:{span:1.5}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-upload2",size:"mini"},on:{click:t.handleImport}},[t._v("导入")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini"},on:{click:t.bulkCheck}},[t._v("批量合计")]),n("el-button",{attrs:{type:"primary",icon:"el-icon-close",size:"mini"},on:{click:t.bulkUnCheck}},[t._v("批量取消合计")]),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:t.bulkDel}},[t._v("批量删除")]),n("span",{staticClass:"sum-weight"},[t._v("总吨数："+t._s(t.sumWeight))]),n("span",{staticClass:"sum-weight-line"},[t._v("已合计总吨数："+t._s(t.checkSumWeight))]),n("span",{staticClass:"sum-weight-line"},[t._v("未合计总吨数："+t._s(t.noCheckSumWeight))])],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.userList},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"center"}}),n("el-table-column",{attrs:{label:"日期",align:"center",prop:"data","show-overflow-tooltip":!0}}),n("el-table-column",{attrs:{label:"车号",align:"center",prop:"code","show-overflow-tooltip":!0}}),n("el-table-column",{attrs:{label:"吨数",align:"center",prop:"weight","show-overflow-tooltip":!0}}),n("el-table-column",{attrs:{label:"导入时间",align:"center",prop:"createTime"}}),n("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(n){return t.handleStatusChange(e.row)}},model:{value:e.row.checkStatus,callback:function(n){t.$set(e.row,"checkStatus",n)},expression:"scope.row.checkStatus"}})]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(n){return t.handleUpdate(e.row)}}},[t._v("修改")])]}}])})],1)],1)],1),n("el-dialog",{attrs:{title:t.upload.title,visible:t.upload.open,width:"400px","append-to-body":""},on:{"update:visible":function(e){return t.$set(t.upload,"open",e)}}},[n("el-upload",{ref:"upload",attrs:{limit:1,accept:".xlsx, .xls",headers:t.upload.headers,action:t.upload.url,disabled:t.upload.isUploading,"auto-upload":!1,drag:""}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[t._v(" 将文件拖到此处，或 "),n("em",[t._v("点击上传")])]),n("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[t._v("提示：仅允许导入“xls”或“xlsx”格式文件！")])]),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submitFileForm}},[t._v("确 定")]),n("el-button",{on:{click:function(e){t.upload.open=!1}}},[t._v("取 消")])],1)],1),n("el-dialog",{attrs:{title:"修改详情",visible:t.updateOpen,width:"700px","append-to-body":""},on:{"update:visible":function(e){t.updateOpen=e}}},[n("el-form",{ref:"form",attrs:{model:t.goodsLog,"label-width":"120px"}},[n("el-row",[n("el-col",{attrs:{span:16}},[n("el-form-item",{attrs:{label:"日期",prop:"jobName"}},[n("el-input",{attrs:{placeholder:"请输入日期"},model:{value:t.goodsLog.data,callback:function(e){t.$set(t.goodsLog,"data",e)},expression:"goodsLog.data"}})],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:16}},[n("el-form-item",{attrs:{label:"车号",prop:"jobName"}},[n("el-input",{attrs:{placeholder:"请输入车号"},model:{value:t.goodsLog.code,callback:function(e){t.$set(t.goodsLog,"code",e)},expression:"goodsLog.code"}})],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:16}},[n("el-form-item",{attrs:{label:"吨数",prop:"jobName"}},[n("el-input",{attrs:{type:"number",placeholder:"吨数"},model:{value:t.goodsLog.weight,callback:function(e){t.$set(t.goodsLog,"weight",e)},expression:"goodsLog.weight"}})],1)],1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),n("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)},i=[]},"4dc3":function(t,e,n){"use strict";n("d81d"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n("c0c7");n("542c");var i={name:"User",data:function(){return{sumWeight:0,noCheckSumWeight:0,checkSumWeight:0,userList:[],form:{},upload:{open:!1,title:"",isUploading:!1,url:"/api/excel/fileUpload"},updateOpen:!1,queryParams:{code:""},goodsLog:{id:"",data:"",code:"",weight:""},ids:[],single:"",multiple:""}},watch:{},created:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,(0,o.listUser)(this.queryParams.code).then((function(e){t.userList=e;var n=0,o=0,i=0;for(var a in t.userList)0===t.userList[a].checkStatus?o+=100*t.userList[a].weight:i+=100*t.userList[a].weight,n+=100*t.userList[a].weight;t.sumWeight=n/100,t.noCheckSumWeight=o/100,t.checkSumWeight=i/100,t.loading=!1}))},handleStatusChange:function(t){var e=this,n=t.checkStatus,i=0===t.checkStatus?"取消合计":"合计";this.$confirm("确认要"+i+"吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=[t.id];return 0===n?(0,o.unExcelCheck)(e):(0,o.excelCheck)(e)})).then((function(){e.getList()}))},bulkCheck:function(){var t=this;this.$confirm("确认要批量合计吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=t.ids;(0,o.excelCheck)(e).then((function(e){t.getList()}))}))},bulkUnCheck:function(){var t=this;this.$confirm("确认要批量取消合计吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=t.ids;(0,o.unExcelCheck)(e).then((function(e){t.getList()}))}))},bulkDel:function(){var t=this;this.$confirm("确认要删除吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=t.ids;(0,o.delById)(e).then((function(e){t.getList()}))}))},handleUpdate:function(t){this.goodsLog.id=t.id,this.goodsLog.data=t.data,this.goodsLog.code=t.code,this.goodsLog.weight=t.weight,this.updateOpen=!0},cancel:function(){this.updateOpen=!1,this.resetQuery()},reset:function(){this.queryParams={code:""},this.resetForm("form")},handleQuery:function(){this.getList()},resetQuery:function(){this.queryParams={code:""},this.getList()},handleSelectionChange:function(t){this.ids=t.map((function(t){return t.id})),this.single=1!=t.length,this.multiple=!t.length},submitForm:function(){var t=this;(0,o.updateById)(this.goodsLog).then((function(){t.updateOpen=!1,t.resetQuery()}))},handleImport:function(){this.upload.title="用户导入",this.upload.open=!0},submitFileForm:function(){this.$refs.upload.submit(),this.upload.open=!1,this.getList()}}};e.default=i},"75e5":function(t,e,n){"use strict";n.r(e);var o=n("4dc3"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},c0c7:function(t,e,n){"use strict";var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.listUser=a,e.excelCheck=l,e.unExcelCheck=s,e.updateById=r,e.delById=c;var i=o(n("b775"));function a(t){return(0,i.default)({url:"/excel/by?code="+t,method:"get"})}function l(t){return(0,i.default)({url:"/excel/check",method:"put",data:t})}function s(t){return(0,i.default)({url:"/excel/unCheck",method:"put",data:t})}function r(t){return(0,i.default)({url:"/excel",method:"put",data:t})}function c(t){return(0,i.default)({url:"/excel/delete",method:"put",data:t})}},d44d:function(t,e,n){"use strict";n("222d")}}]);