(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c2c6ab28"],{"1e4b":function(e,t,o){"use strict";o.r(t);var a=o("cbbc"),l=o("75e5");for(var n in l)["default"].indexOf(n)<0&&function(e){o.d(t,e,(function(){return l[e]}))}(n);o("d44d");var i=o("2877"),s=Object(i["a"])(l["default"],a["a"],a["b"],!1,null,null,null);t["default"]=s.exports},"222d":function(e,t,o){},"4dc3":function(e,t,o){"use strict";o("d81d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o("c0c7");o("542c");var l={name:"User",data:function(){return{sumWeight:0,userList:[],form:{},upload:{open:!1,title:"",isUploading:!1,url:"/api/excel/fileUpload"},updateOpen:!1,queryParams:{code:""},goodsLog:{id:"",data:"",code:"",weight:""},ids:[],single:"",multiple:""}},watch:{},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,(0,a.listUser)(this.queryParams.code).then((function(t){e.userList=t;var o=0;for(var a in e.userList)o+=100*e.userList[a].weight;e.sumWeight=o/100,e.loading=!1}))},handleStatusChange:function(e){var t=this,o=e.checkStatus,l=0===e.checkStatus?"取消合计":"合计";this.$confirm("确认要"+l+"吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=[e.id];return 0===o?(0,a.unExcelCheck)(t):(0,a.excelCheck)(t)})).then((function(){t.msgSuccess(l+"成功")}))},handleUpdate:function(e){this.goodsLog.id=e.id,this.goodsLog.data=e.data,this.goodsLog.code=e.code,this.goodsLog.weight=e.weight,this.updateOpen=!0},cancel:function(){this.updateOpen=!1,this.resetQuery()},reset:function(){this.queryParams={code:""},this.resetForm("form")},handleQuery:function(){this.getList()},resetQuery:function(){this.queryParams={code:""},this.getList()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!=e.length,this.multiple=!e.length},submitForm:function(){var e=this;(0,a.updateById)(this.goodsLog).then((function(){e.updateOpen=!1,e.resetQuery()}))},handleImport:function(){this.upload.title="用户导入",this.upload.open=!0},submitFileForm:function(){this.$refs.upload.submit(),this.upload.open=!1,this.getList()}}};t.default=l},"75e5":function(e,t,o){"use strict";o.r(t);var a=o("4dc3"),l=o.n(a);for(var n in a)["default"].indexOf(n)<0&&function(e){o.d(t,e,(function(){return a[e]}))}(n);t["default"]=l.a},c0c7:function(e,t,o){"use strict";var a=o("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.listUser=n,t.excelCheck=i,t.unExcelCheck=s,t.updateById=r;var l=a(o("b775"));function n(e){return(0,l.default)({url:"/excel/by?code="+e,method:"get"})}function i(e){return(0,l.default)({url:"/excel/check",method:"put",data:e})}function s(e){return(0,l.default)({url:"/excel/unCheck",method:"put",data:e})}function r(e){return(0,l.default)({url:"/excel",method:"put",data:e})}},cbbc:function(e,t,o){"use strict";o.d(t,"a",(function(){return a})),o.d(t,"b",(function(){return l}));var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:20,xs:24}},[o("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[o("el-form-item",{attrs:{label:"车号",prop:"userName"}},[o("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入车号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.code,callback:function(t){e.$set(e.queryParams,"code",t)},expression:"queryParams.code"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),o("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),o("el-row",{staticClass:"mb8",attrs:{gutter:10}},[o("el-col",{attrs:{span:1.5}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-upload2",size:"mini"},on:{click:e.handleImport}},[e._v("导入")]),o("span",{staticClass:"sum-weight"},[e._v("总吨数："+e._s(e.sumWeight))])],1)],1),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.userList},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",align:"center"}}),o("el-table-column",{attrs:{label:"日期",align:"center",prop:"data","show-overflow-tooltip":!0}}),o("el-table-column",{attrs:{label:"车号",align:"center",prop:"code","show-overflow-tooltip":!0}}),o("el-table-column",{attrs:{label:"吨数",align:"center",prop:"weight","show-overflow-tooltip":!0}}),o("el-table-column",{attrs:{label:"导入时间",align:"center",prop:"createTime"}}),o("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(o){return e.handleStatusChange(t.row)}},model:{value:t.row.checkStatus,callback:function(o){e.$set(t.row,"checkStatus",o)},expression:"scope.row.checkStatus"}})]}}])}),o("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(o){return e.handleUpdate(t.row)}}},[e._v("修改")])]}}])})],1)],1)],1),o("el-dialog",{attrs:{title:e.upload.title,visible:e.upload.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.upload,"open",t)}}},[o("el-upload",{ref:"upload",attrs:{limit:1,accept:".xlsx, .xls",headers:e.upload.headers,action:e.upload.url,disabled:e.upload.isUploading,"auto-upload":!1,drag:""}},[o("i",{staticClass:"el-icon-upload"}),o("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),o("em",[e._v("点击上传")])]),o("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("提示：仅允许导入“xls”或“xlsx”格式文件！")])]),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.submitFileForm}},[e._v("确 定")]),o("el-button",{on:{click:function(t){e.upload.open=!1}}},[e._v("取 消")])],1)],1),o("el-dialog",{attrs:{title:"修改详情",visible:e.updateOpen,width:"700px","append-to-body":""},on:{"update:visible":function(t){e.updateOpen=t}}},[o("el-form",{ref:"form",attrs:{model:e.goodsLog,"label-width":"120px"}},[o("el-row",[o("el-col",{attrs:{span:16}},[o("el-form-item",{attrs:{label:"日期",prop:"jobName"}},[o("el-input",{attrs:{placeholder:"请输入日期"},model:{value:e.goodsLog.data,callback:function(t){e.$set(e.goodsLog,"data",t)},expression:"goodsLog.data"}})],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:16}},[o("el-form-item",{attrs:{label:"车号",prop:"jobName"}},[o("el-input",{attrs:{placeholder:"请输入车号"},model:{value:e.goodsLog.code,callback:function(t){e.$set(e.goodsLog,"code",t)},expression:"goodsLog.code"}})],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:16}},[o("el-form-item",{attrs:{label:"吨数",prop:"jobName"}},[o("el-input",{attrs:{type:"number",placeholder:"吨数"},model:{value:e.goodsLog.weight,callback:function(t){e.$set(e.goodsLog,"weight",t)},expression:"goodsLog.weight"}})],1)],1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),o("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},l=[]},d44d:function(e,t,o){"use strict";o("222d")}}]);