(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1865c829"],{"1e4b":function(e,t,n){"use strict";n.r(t);var l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:20,xs:24}},[n("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[n("el-form-item",{attrs:{label:"车号",prop:"userName"}},[n("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入车号",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.code,callback:function(t){e.$set(e.queryParams,"code",t)},expression:"queryParams.code"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),n("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),n("el-row",{staticClass:"mb8",attrs:{gutter:10}},[n("el-col",{attrs:{span:1.5}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-upload2",size:"mini"},on:{click:e.handleImport}},[e._v("导入")]),n("span",{staticClass:"sum-weight"},[e._v("总吨数："+e._s(e.sumWeight))])],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.userList},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"center"}}),n("el-table-column",{attrs:{label:"日期",align:"center",prop:"data","show-overflow-tooltip":!0}}),n("el-table-column",{attrs:{label:"车号",align:"center",prop:"code","show-overflow-tooltip":!0}}),n("el-table-column",{attrs:{label:"吨数",align:"center",prop:"weight","show-overflow-tooltip":!0}}),n("el-table-column",{attrs:{label:"导入时间",align:"center",prop:"createTime"}}),n("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(n){return e.handleStatusChange(t.row)}},model:{value:t.row.checkStatus,callback:function(n){e.$set(t.row,"checkStatus",n)},expression:"scope.row.checkStatus"}})]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(n){return e.handleUpdate(t.row)}}},[e._v("修改")])]}}])})],1)],1)],1),n("el-dialog",{attrs:{title:e.upload.title,visible:e.upload.open,width:"400px","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.upload,"open",t)}}},[n("el-upload",{ref:"upload",attrs:{limit:1,accept:".xlsx, .xls",headers:e.upload.headers,action:e.upload.url,disabled:e.upload.isUploading,"auto-upload":!1,drag:""}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),n("em",[e._v("点击上传")])]),n("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("提示：仅允许导入“xls”或“xlsx”格式文件！")])]),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.submitFileForm}},[e._v("确 定")]),n("el-button",{on:{click:function(t){e.upload.open=!1}}},[e._v("取 消")])],1)],1)],1)},a=[],i=(n("d81d"),n("c0c7")),o=(n("542c"),{name:"User",data:function(){return{sumWeight:0,userList:[],form:{},upload:{open:!1,title:"",isUploading:!1,url:"/api/excel/fileUpload"},queryParams:{code:""},ids:[],single:"",multiple:""}},watch:{},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,Object(i["listUser"])(this.queryParams.code).then((function(t){e.userList=t;var n=0;for(var l in e.userList)n+=100*e.userList[l].weight;e.sumWeight=n/100,e.loading=!1}))},handleStatusChange:function(e){var t=this,n=e.checkStatus,l=0===e.checkStatus?"取消合计":"合计";this.$confirm("确认要"+l+"吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=[e.id];return 0===n?Object(i["unExcelCheck"])(t):Object(i["excelCheck"])(t)})).then((function(){t.msgSuccess(l+"成功")}))},reset:function(){this.form={code:""},this.resetForm("form")},handleQuery:function(){this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!=e.length,this.multiple=!e.length},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&(void 0!=e.form.userId?updateUser(e.form).then((function(t){e.msgSuccess("修改成功"),e.open=!1,e.getList()})):addUser(e.form).then((function(t){e.msgSuccess("新增成功"),e.open=!1,e.getList()})))}))},handleImport:function(){this.upload.title="用户导入",this.upload.open=!0},submitFileForm:function(){this.$refs.upload.submit(),this.upload.open=!1,this.getList()}}}),s=o,r=(n("d44d"),n("2877")),c=Object(r["a"])(s,l,a,!1,null,null,null);t["default"]=c.exports},"222d":function(e,t,n){},c0c7:function(e,t,n){"use strict";var l=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.listUser=i,t.excelCheck=o,t.unExcelCheck=s;var a=l(n("b775"));function i(e){return(0,a.default)({url:"/excel/by?code="+e,method:"get"})}function o(e){return(0,a.default)({url:"/excel/check",method:"put",data:e})}function s(e){return(0,a.default)({url:"/excel/unCheck",method:"put",data:e})}},d44d:function(e,t,n){"use strict";n("222d")}}]);