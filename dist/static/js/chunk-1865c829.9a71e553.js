(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1865c829"],{"1e4b":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:20,xs:24}},[n("el-form",{ref:"queryForm",attrs:{model:t.queryParams,inline:!0,"label-width":"68px"}},[n("el-form-item",{attrs:{label:"车号",prop:"userName"}},[n("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入车号",clearable:"",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleQuery(e)}},model:{value:t.queryParams.code,callback:function(e){t.$set(t.queryParams,"code",e)},expression:"queryParams.code"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"cyan",icon:"el-icon-search",size:"mini"},on:{click:t.handleQuery}},[t._v("搜索")]),n("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:t.resetQuery}},[t._v("重置")])],1)],1),n("el-row",{staticClass:"mb8",attrs:{gutter:10}},[n("el-col",{attrs:{span:1.5}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-upload2",size:"mini"},on:{click:t.handleImport}},[t._v("导入")]),n("span",{staticClass:"sum-weight"},[t._v("总吨数："+t._s(t.sumWeight))])],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.userList},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"center"}}),n("el-table-column",{attrs:{label:"日期",align:"center",prop:"data","show-overflow-tooltip":!0}}),n("el-table-column",{attrs:{label:"车号",align:"center",prop:"code","show-overflow-tooltip":!0}}),n("el-table-column",{attrs:{label:"吨数",align:"center",prop:"weight","show-overflow-tooltip":!0}}),n("el-table-column",{attrs:{label:"导入时间",align:"center",prop:"createTime"}}),n("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(n){return t.handleStatusChange(e.row)}},model:{value:e.row.checkStatus,callback:function(n){t.$set(e.row,"checkStatus",n)},expression:"scope.row.checkStatus"}})]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(n){return t.handleUpdate(e.row)}}},[t._v("修改")])]}}])})],1)],1)],1),n("el-dialog",{attrs:{title:t.upload.title,visible:t.upload.open,width:"400px","append-to-body":""},on:{"update:visible":function(e){return t.$set(t.upload,"open",e)}}},[n("el-upload",{ref:"upload",attrs:{limit:1,accept:".xlsx, .xls",headers:t.upload.headers,action:t.upload.url,disabled:t.upload.isUploading,"auto-upload":!1,drag:""}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[t._v(" 将文件拖到此处，或 "),n("em",[t._v("点击上传")])]),n("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[t._v("提示：仅允许导入“xls”或“xlsx”格式文件！")])]),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submitFileForm}},[t._v("确 定")]),n("el-button",{on:{click:function(e){t.upload.open=!1}}},[t._v("取 消")])],1)],1)],1)},a=[],l=(n("d81d"),n("c0c7")),o=(n("542c"),{name:"User",data:function(){return{sumWeight:0,userList:[],form:{},upload:{open:!1,title:"",isUploading:!1,url:"/excel/fileUpload"},queryParams:{code:""},ids:[],single:"",multiple:""}},watch:{},created:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,Object(l["i"])(this.queryParams.code).then((function(e){t.userList=e;var n=0;for(var i in t.userList)n+=100*t.userList[i].weight;t.sumWeight=n/100,t.loading=!1}))},handleStatusChange:function(t){var e=this,n=t.checkStatus,i=0===t.checkStatus?"取消合计":"合计";this.$confirm("确认要"+i+"吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=[t.id];return 0===n?Object(l["k"])(e):Object(l["d"])(e)})).then((function(){e.msgSuccess(i+"成功")}))},reset:function(){this.form={code:""},this.resetForm("form")},handleQuery:function(){this.getList()},resetQuery:function(){this.dateRange=[],this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(t){this.ids=t.map((function(t){return t.id})),this.single=1!=t.length,this.multiple=!t.length},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){e&&(void 0!=t.form.userId?updateUser(t.form).then((function(e){t.msgSuccess("修改成功"),t.open=!1,t.getList()})):addUser(t.form).then((function(e){t.msgSuccess("新增成功"),t.open=!1,t.getList()})))}))},handleImport:function(){this.upload.title="用户导入",this.upload.open=!0},submitFileForm:function(){this.$refs.upload.submit(),this.upload.open=!1,this.getList()}}}),s=o,r=(n("d44d"),n("2877")),c=Object(r["a"])(s,i,a,!1,null,null,null);e["default"]=c.exports},"222d":function(t,e,n){},c0c7:function(t,e,n){"use strict";n.d(e,"i",(function(){return a})),n.d(e,"d",(function(){return l})),n.d(e,"k",(function(){return o}));var i=n("b775");function a(t){return Object(i["a"])({url:"/excel/by?code="+t,method:"get"})}function l(t){return Object(i["a"])({url:"excel/check",method:"put",data:t})}function o(t){return Object(i["a"])({url:"excel/unCheck",method:"put",data:t})}},d44d:function(t,e,n){"use strict";n("222d")}}]);